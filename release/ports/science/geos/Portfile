# $Id: Portfile 87443 2011-11-21 23:15:42Z ryandesign@macports.org $

PortSystem       1.0

name             geos
version          3.6.2
license          LGPL-2.1
categories       science
platforms        darwin
maintainers      gaige.net:opendarwin

description      GEOS Geometry Engine - Open Source
long_description \
  A C++ port of the Java Topology Suite, providing OpenGIS Simple \
  Features for SQL spatial predicate functions and spatial operators, \
  as well as specific JTS topology functions. Used by PostGIS.

homepage         http://trac.osgeo.org/geos/
master_sites     http://download.osgeo.org/geos/
use_bzip2        yes

checksums           sha1    b9d0578c6b5308cf05a3dd8873802f9862c04291 \
                    rmd160  6efa217f1bfe5bb4a3de82e1899a97b3a8c90b9e \
                    sha256  045a13df84d605a866602f6020fc6cbf8bf4c42fb50de237a08926e1d7d7652a

if {${configure.compiler} == "llvm-gcc-4.2"} {
    configure.compiler clang
}

post-destroot {
    set docdir ${prefix}/share/doc/${name}
    xinstall -d ${destroot}${docdir}
    xinstall -m 644 -W ${worksrcpath} AUTHORS COPYING NEWS README \
        TODO ${destroot}${docdir}
}

test.run         yes
test.cmd         make
test.target      check

use_parallel_build yes

livecheck.type   regex
livecheck.url    ${homepage}
livecheck.regex  {geos-(\d+(?:\.\d+)*)}
